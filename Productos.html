<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos - MatchaSalon</title>
    <link rel="stylesheet" href="CSS/style.css">
</head>
<body>

<header class="header">
    <img class="bg" src="Imagen/bg.svg" alt="">
    <div class="menu container">
        <a href="index.html" class="logo">Productos</a>

        <input type="checkbox" id="menu">
        <label for="menu">
            <img src="Imagen/menu.svg" class="menu-icono" alt="">
        </label>

        <nav class="navbar">
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="Servicios.html">Servicios</a></li>
                <li><a href="Productos.html">Productos</a></li>
                <li><a href="citas.html">Agendar Citas</a></li>

                <!-- Ícono carrito -->
                <li class="cart-icon">
                    <a href="carrito.html">
                        <svg width="26" height="26" viewBox="0 0 24 24">
                            <path d="M6 6h15l-2 9H8L6 6zm0 0H3"
                                stroke="#5E925C" stroke-width="2" fill="none"
                                stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="10" cy="19" r="1" fill="#5E925C"/>
                            <circle cx="17" cy="19" r="1" fill="#5E925C"/>
                        </svg>
                        <span id="cart-count">0</span>
                    </a>
                </li>

                <li id="user-area"></li>
            </ul>
        </nav>
    </div>
</header>

<main class="products container">
    <h2>Lista de Productos</h2>

    <!-- CONTENEDOR DINÁMICO PARA PRODUCTOS -->
    <div id="lista-productos" class="service-list"></div>
</main>

<footer class="footer container">
    <div class="footer-links">
        <div class="link">
            <h3>Contactos</h3>
            <div class="socials">
                <img src="Imagen/s1.svg" alt="">
                <img src="Imagen/s3.svg" alt="">
            </div>
        </div>

        <div class="link">
            <h3>Redes sociales</h3>
            <ul>
                <li><a href="#">Instagram | @Matcha_Salon</a></li>
                <li><a href="#">Correo | matchasalon@gmail.com </a></li>
            </ul>
        </div>

        <div class="link">
            <h3>Servicios</h3>
            <ul>
                <li><a href="#">Manicure</a></li>
                <li><a href="#">Pedicure</a></li>
                <li><a href="#">Tintes</a></li>
                <li><a href="#">Faciales</a></li>
            </ul>
        </div>
    </div>
</footer>

<!-- ============================
     SCRIPTS
============================= -->
<script src="JS/carrito.js"></script>
<script src="JS/session.js"></script>

<script>
/* ===========================================
   Cargar productos DESDE API .NET
=========================================== */

const API_PRODUCTOS = "https://localhost:7024/api/Productos";

document.addEventListener("DOMContentLoaded", async () => {
    const contenedor = document.getElementById("lista-productos");

    try {
        const res = await fetch(API_PRODUCTOS);
        const productos = await res.json();

        contenedor.innerHTML = "";

        productos.forEach(p => {
            contenedor.innerHTML += `
                <div class="service-card">
                    <img src="Imagen/${p.nombreProducto.replace(/\s+/g,'')}.jpg" alt="${p.nombreProducto}">
                    
                    <h3>${p.nombreProducto}</h3>
                    <p>${p.descripcion}</p>

                    <span class="service-price">$${p.precio}</span>

                    <button 
                        class="btn-agregar" 
                        onclick="agregarAlCarrito(${p.idProducto}, '${p.nombreProducto}', ${p.precio})">
                        Agregar al carrito
                    </button>
                </div>
            `;
        });

    } catch (error) {
        console.error("Error cargando productos:", error);
    }
});
</script>

</body>
</html>
